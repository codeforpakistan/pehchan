{% extends "base.html" %}

{% block title %}Dashboard - Pehchan Portal{% endblock %}

{% block content %}
<div class="dashboard-container">
    <h1>Welcome, {{ user.full_name }}</h1>

    <!-- Avatar Management -->
    <h2>Manage Your Avatar</h2>
    <div class="avatar-section">
        <!-- Display Current Avatar -->
        <img src="{{ url_for('static', filename='avatars/' + user.avatar) }}" alt="User Avatar" class="avatar-image">

        <!-- Form to Upload a New Avatar -->
        <form action="/upload_avatar" method="POST" enctype="multipart/form-data">
            <label for="avatar">Upload New Avatar:</label>
            <input type="file" name="avatar" accept=".jpg, .jpeg, .png, .gif">
            <button type="submit">Upload Avatar</button>
        </form>

        <!-- Remove Avatar (Reset to Default) -->
        <form action="/remove_avatar" method="POST">
            <button type="submit">Remove Avatar (Reset to Default)</button>
        </form>
    </div>

    <!-- Profile Management -->
    <h2>Update Your Profile</h2>
    <form action="/update_profile" method="POST">
        <label for="full_name">Full Name:</label>
        <input type="text" name="full_name" value="{{ user.full_name }}" required><br>

        <label for="email">Email:</label>
        <input type="email" name="email" value="{{ user.email }}" required><br>

        <label for="phone">Phone Number:</label>
        <input type="tel" name="phone" value="{{ user.phone }}" required><br>

        <label for="cnic">CNIC:</label>
        <input type="text" name="cnic" value="{{ user.cnic }}" required><br>

        <label for="gender">Gender:</label>
        <input type="text" name="gender" value="{{ user.gender }}"><br>

        <label for="mothers_name">Mother's Name:</label>
        <input type="text" name="mothers_name" value="{{ user.mothers_name }}"><br>

        <label for="address">Address:</label>
        <input type="text" name="address" value="{{ user.address }}"><br>

        <label for="date_of_birth">Date of Birth:</label>
        <input type="date" name="date_of_birth" value="{{ user.date_of_birth }}"><br>

        <button type="submit">Update Profile</button>
    </form>
    
    <!-- Logout Link -->
    <a href="/logout">Logout</a>
</div>
{% endblock %}
